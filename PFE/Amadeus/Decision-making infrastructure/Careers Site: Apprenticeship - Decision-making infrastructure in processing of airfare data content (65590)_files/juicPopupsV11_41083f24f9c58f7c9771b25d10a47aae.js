function SFNamedAnchor(a,b,c){this._init(a,b,c)}juic.extend(SFNamedAnchor,juic.Component,{_init:function(a,b,c){this._label=a;this._name=Util.createAnchorName(b);this._cssClass=c},renderHtml:function(a){a.push('\x3ca name\x3d"',this._name,'" class\x3d"namedAnchor ',this._cssClass,'"\x3e',juic.escapeHTML(this._label),"\x3c/a\x3e")},go:function(){window.location.hash="#"+this._name}});
function SFDialog(a,b,c,d,e,g,f,h){this.register();juic.assert("undefined"!=typeof b,"[SFDialog] : Content component required");this.setComponent(b);"undefined"!=typeof a&&this.setDialogTitle(a);juic.assert(c&&"object"==typeof c,"[SFDialog] : You must provide and array of button definitions");juic.assert(!d||"number"==typeof d,"[SFDialog] : innerWidth parameter must be a number.");juic.assert(!e||"number"==typeof e,"[SFDialog] : innerHeight parameter must be a number.");"undefined"!=typeof f&&(juic.assert("number"==
typeof f,"[SFDialog] : titleHeaderTagLevel must be a number."),juic.assert(-1<f&&7>f,"[SFDialog] : titleHeaderTagLevel must be a number between 0 and 6."));this._innerWidth=d||740;this._innerHeight=e||540;this._preventClose=!1;this._showCloseIcon=!0;this._closeDialogOnEsc=!1;this._buttons=[];this._setButtons(c);this._show=!0;this._focusLoop=new SFFocusLoop(this.id);this._focusMarkers=this._focusLoop.getMarkers();this._useNamedAnchor=g||!1;this._titleHeaderTagLevel=f;this._useIconFonts=!!h&&!Util.isFioriEnabled()}
SFDialog.prototype=function(){return juic.set(new juic.Component,{setFocus:function(a){this._focusLoop.setFocus(a);this._useNamedAnchor&&(this.namedAnchor&&!a)&&this.namedAnchor.go()},setCloseDialogOnEsc:function(a){this._closeDialogOnEsc=a},showDialog:function(a){SFOverlayMgr.addEventListener("overlayRendered",this,"_dialogRendered");SFOverlayMgr.showOverlay(this,!0,null,null,this._getOverlayOpts());this._closeDialogOnEsc&&SFOverlayMgr.addEventListener("escKeyPressed",this,"_escKeyPressed");this._refocusId=
a},_getAnchorName:function(){return Util.createIdentifier("sfDialogBoxHeaderAnchor_"+this.id)},_getOverlayOpts:function(){return{dispatchEscKeyPress:this._closeDialogOnEsc}},_escKeyPressed:function(){this._cancel()},_dialogRendered:function(a){a.componentId==this.id&&this.setFocus(!1)},_renderTitleSection:function(a){this._titleHeaderTagLevel?a.push("\x3ch",this._titleHeaderTagLevel,' class\x3d"hdrText" id\x3d"',this.id,'_dialogTitle"\x3e'):a.push('\x3cdiv class\x3d"hdrText" id\x3d"',this.id,'_dialogTitle"\x3e');
this._useNamedAnchor?(this.namedAnchor=new SFNamedAnchor(this._dialogTitle||"\x26nbsp;",this._getAnchorName(),"panelHeaderTitle"),a.push(this.namedAnchor)):a.push(juic.escapeHTML(this._dialogTitle));this._titleHeaderTagLevel?a.push("\x3c/h",this._titleHeaderTagLevel,"\x3e"):a.push("\x3c/div\x3e")},renderHtml:function(a){a.push('\x3cdiv class\x3d"sfDlg globalContentBackgroundVariant" id\x3d"'+this.id+'" style\x3d"position:relative;'+(this._show?"":"display:none;")+'"\x3e');a.push('\x3cdiv id\x3d"'+
this.id+'_underlay" style\x3d"width:'+this._innerWidth+"px;height:"+(this._innerHeight+70)+'px;" class\x3d"underLay"\x3e\x3c/div\x3e');this._focusMarkers[0].renderHtml(a);a.push('\x3cdiv id\x3d"'+this.id+'_overlay" class\x3d"sfDlgCntr" role\x3d"dialog" aria-labelledby\x3d"'+this.id+'_dialogTitle" tabindex\x3d"0" style\x3d"width:'+this._innerWidth+'px;"\x3e');a.push('\x3cdiv class\x3d"hdr globalPortletHeader"\x3e');this._renderTitleSection(a);a.push('\x3c/div\x3e\x3cdiv id\x3d"'+this.id+'_body" class\x3d"body globalPortletBody" style\x3d"height:'+
this._innerHeight+'px;"\x3e\x3cdiv id\x3d"'+this.id+'_innerBody" class\x3d"innerBdy"');this._bodyStyle&&a.push(this._bodyStyle);a.push("\x3e");this._contentComponent&&this._contentComponent.renderHtml(a);a.push("\x3c/div\x3e\x3c/div\x3e");a.push('\x3cdiv class\x3d"ftr"\x3e\x3cdiv class\x3d"globalFloatRight button_row globalIconFont1Container "\x3e\x3cdiv id\x3d"dialog_btns'+this.id+'"\x3e');if(this._buttons)for(var b=0,c=this._buttons.length;b<c;++b)this._buttons[b].renderHtml(a);this._showCloseIcon&&
(a.push('\x3cbutton id\x3d"'+this.id+'dlg_close_x" title\x3d"'+MSGS.COMMON_Close_Dialog+'"'),a.push(' onclick\x3d"',this.fireCode("_cancel"),'; return false;" class\x3d"close-x globalIconFont1Support',this._useIconFonts?" sapIcon":"",'"  href\x3d"javascript:void(0)" \x3e',this._useIconFonts?"\x26#xe03e;":"\x3cspan class\x3d'legacyFont1Icon'\x3e\x26#xe03e;\x3c/span\x3e","\x3c/button\x3e"));this._focusMarkers[1].renderHtml(a);a.push("\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'clear_all'\x3e\x3c/div\x3e\x3c/div\x3e");
a.push("\x3c/div\x3e\x3c/div\x3e")},cleanup:function(){for(var a=0,b=this._buttons.length;a<b;a++)this._buttons[a].isRegistered()&&this._buttons[a].unregister();this.namedAnchor&&this.namedAnchor.isRegistered()&&this.namedAnchor.cleanup();this.isRegistered()&&this.unregister()},setNewButtons:function(a){for(;this._buttons&&0<this._buttons.length;)this._buttons.shift().cleanup();this._setButtons(a);if(juic.$("dialog_btns"+this.id)){a=[];if(this._buttons)for(var b=0,c=this._buttons.length;b<c;++b)this._buttons[b].renderHtml(a);
juic.$("dialog_btns"+this.id).innerHTML=a.join("")}},_setButtons:function(a){a=this._buttonDefs=a;for(var b=0,c=a.length;b<c;++b){var d=a[b],e=new SFCommandButton(d.label,d.active,d.enabled,d.isRounded||!1,{ariaFocusable:d.ariaFocusable||!1});e.setActionCommand(d.eventName);e.addEventListener("action",this);this._buttons.push(e)}},setDialogTitle:function(a){this._dialogTitle=a;var b=juic.$(this.id+"_dialogTitle");b&&(b.innerHTML=juic.escapeHTML(a))},setInnerHeight:function(a){var b=juic.$(this.id+
"_body");this._innerHeight=a;b&&(juic.$(this.id+"_underlay").style.height=a+70+"px",b.style.height=a+"px")},getInnerHeight:function(){var a=juic.$(this.id+"_body");return a?a.offsetHeight:-1},setInnerWidth:function(a){this._innerWidth=a;juic.$(this.id+"_body")&&(juic.$(this.id+"_underlay").style.width=a+"px",juic.$(this.id+"_overlay").style.width=a+"px")},getInnerWidth:function(){return juic.$(this.id+"_body")?juic.$(this.id+"_underlay").offsetWidth:-1},setComponent:function(a){this._contentComponent=
a;juic.$(this.id+"_body")&&a.render(this.id+"_innerBody")},_cancel:function(){var a=this._cancelActionData;a?this.dispatch(a.event,{actionCommand:a.actionCommand,data:a.data}):this.close()},handleEvent:function(a){if("action"==a.type){if("hide"==a.actionCommand){var b=this;setTimeout(function(){b.close()},0)}this.dispatchEvent(a)}},disableButtons:function(){for(var a=0,b=this._buttons.length;a<b;++a)this._buttons[a].isEnabled()&&this._buttons[a].setEnabled(!1)},enableButtons:function(){for(var a=
0,b=this._buttons.length;a<b;++a)this._buttons[a].isEnabled()||this._buttons[a].setEnabled(!0)},disableButton:function(a){this._buttons[a].setEnabled(!1);this.dispatch("buttonsDisabled")},enableButton:function(a){this._buttons[a].setEnabled(!0);this.dispatch("buttonsEnabled")},isButtonEnabled:function(a){return 0<=a&&a<this._buttons.length?this._buttons[a].isEnabled():!1},setButtonLabel:function(a,b){this._buttons[a].setLabel(b)},setButtonActionCommand:function(a,b){this._buttons[a].setActionCommand(b)},
setButtonVisible:function(a,b){this._buttons[a].setVisible(b)},setPreventCloseState:function(a){this._preventClose=a},getPreventCloseState:function(){return this._preventClose},setShowCloseIcon:function(a){this._showCloseIcon=a;if(a=juic.$(this.id+"dlg_close_x"))this._showCloseIcon?this._showCloseIcon&&(a.style.display=""):a.style.display="none"},setBodyStyle:function(a){this._bodyStyle=a},close:function(){SFOverlayMgr.removeEventListener("overlayRendered",this);this._preventClose?this.dispatch("action",
{actionCommand:"hideRequest"}):(this._closeDialogOnEsc&&SFOverlayMgr.removeEventListener("escKeyPressed",this),this.dispatch("action",{actionCommand:"hide"}),this.dispatch("hide"));var a=juic.$(this._refocusId);a&&a.focus()},show:function(a){this._show=a;var b=juic.$(this.id);b&&(b.style.display=a?"":"none")},setCancelAction:function(a,b){juic.assert(a,"[SFDialog] : Trying to set invalid cancel actionCommand.");this._cancelActionData={event:"action",actionCommand:a,data:b}}})}();